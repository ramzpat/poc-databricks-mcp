---
applyTo: '**'
description: 'POC Databricks MCP - Copilot workspace configuration'
---

# Databricks MCP Copilot Configuration

## Project Context
- Build a Python FastMCP server that fronts Databricks Serverless SQL Warehouse metadata and governed SELECT queries for allowed catalogs/schemas.
- Enforce guardrails: row/time limits, SELECT-only by default, allowlists for catalogs/schemas, OAuth service principal auth.
- Avoid leaking secrets or raw SQL; surface concise errors and propagate request IDs.

## Reference Instructions (workspace)
- [.github/copilot/instructions/code-style.md](instructions/code-style.md)
- [.github/copilot/instructions/architecture.md](instructions/architecture.md)
- [.github/copilot/instructions/testing-strategy.md](instructions/testing-strategy.md)
- [.github/copilot/instructions/documentation-standards.md](instructions/documentation-standards.md)
- [.github/copilot/prompts/mcp-tool-workflow.prompt.md](prompts/mcp-tool-workflow.prompt.md)
- [.github/copilot/agents/databricks-mcp-dev.md](agents/databricks-mcp-dev.md)

## Key Workflows
1. Add or update an MCP tool (metadata listing, sampling, preview/run query) with guardrails from README/REQUIREMENTS.
2. Implement config validation for allowlists, limits, and OAuth settings pulled from env + YAML.
3. Add tests for scope enforcement, query limits, and error mapping.
4. Update docs and examples when tool surface or guardrails change.

## Development Standards
- Python 3.11+, type hints everywhere, prefer dataclasses or Pydantic-style validation for config objects.
- No secrets in code or logs; environment variables for credentials only.
- Strict SELECT-only unless config allows otherwise; always enforce row/time caps server-side even if caller requests more.
- Logging is structured with request/query IDs; errors are user-friendly and avoid raw SQL/stack traces.

## How to Use
- Reference the above instructions before coding or reviewing.
- For new workflows, copy the patterns from the prompts folder and tailor to the task.
- Keep instructions short and project-specific; iterate as the MCP server evolves.
